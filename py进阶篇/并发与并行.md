### 线程与进程

一个程序可以有多个进程（默认只有一个），一个进程有多个线程（默认只有一个）

### 线程

1、最小的工作单元

2、共享进程中所有的资源

3、每个线程可以分担一些任务，最终完成最后的结果

### 进程

1、独立开辟内存

2、进程之间有数据隔离

![15681288611801](.\images\1568128861180.png)

### 线程与进程（python）

1、一个进程中只能调用一个线程，这是GIL（全局解释锁）所决定的，想要满足多个线程满足工作，必须要开多个进程，这就造成了内存的浪费

![15681293779182](.\images\1568129377918.png)





 ### 小结1

1、操作系统帮助开发者操作硬件

2、devoper写好程序在操作系统上运行



### python多线程情况下

1、计算密集型操作：效率低下，因为GIL锁

2、IO操作：效率高

### java多线程情况下

1、计算密集型操作：效率高

2、IO操纵：效率高

### python 执行计算密集型操作怎么办？

多进程

### python 多进程情况下：

1、计算密集型操作：效率高（浪费内存的资源），

2、IO操作：效率高（浪费内存的资源）

### java 多进程情况下：

1、计算密集型操作：效率高

2、IO操作：效率高

### 以后写python

1、IO密集型就用多线程：文 出/socket网络通信

2、计算密集型就用多进程。

### GIL

1、GIL锁，全局解释器锁。用于限制一个进程中同一时刻只有一个线程被CPU调度



### 线程的使用

1、主线程默认等待子线程执行完毕

![15686362458113](.\images\TIM截图20190916201654.jpg)

2、主线程不等子线程执行，主线程终止，子线程就会终止

![15686362458914](.\images\TIM截图20190916202000.jpg)

3、开发者可以控制主线程等待子线程的时间

​	使用t.join()可以有参数和无参数

3.1 

```
# 无参数，让主线程在这里等着，等到子线程t1执行完毕，才继续往下走
# 有参数，让主线程在这里最多等待N秒，无论是否执行完毕，会继续往下执行
```

![15686362458915](.\images\TIM截图llljpg.jpg)

4、设置线程的名称

![15686362458916](.\images\TIM截图ffgf.jpg)

5、线程本质

![15686362458917](.\images\本质.jpg)

6、面向对象版本的线程

![15686362458919](.\images\方式二.jpg)



### 锁

1、为了控制加锁的区域代码同一时刻只能有一个线程执行

加锁前

![Suo](..\images\锁前.jpg)

加锁后

![Suohou](..\images\锁后.jpg)

### 锁与全局解释器锁的区别

全局解释器锁：控制进程中一个CPU只能调用一个线程

锁：加锁的代码块，保证加锁的代码块运行完，再运行其他线程此加锁代码块

### 总结2

1、应用程序-进程-线程的关系？（进程-线程-协程的区别）

2、为什么要创建线程

由于线程是CPU的最小的工作的单元，创建线程可以利用多核优势实现并行的优势（java、c#）

3、为什么要创建进程

进程和进程之间进行数据隔离（java、c#）

4.python

a、python中存在一个GIL锁，造成-----python多线程无法利用多核的优势，解决-----开多进程（造成资源的浪费）

​	-IO密集型：多线程

​	-计算密集型：多进程

b、线程的创建

​	-Thread

​	-MyThread

c、其他

​	-join

​	-setDeanon

​	-setName

​	-threading.current_thread

​	-start

d、锁

​	-获得

​	-释放

